# SPA

spa는 singlepage application의 약어이다.말그대로 한개의 페이지로 이루어진 애플리케이션이라는의미이다.

리액트는 뷰렌더링을 사용자의 브라우저가 담당하도록하고 우선 애플리케이션을 브라우저에 불러와서 실행시킨 후에 사용자와의 인터렉션이 발생하면 필요한 부분만 자바스크립트를 이용하여 업데이트해준다. 만약 새로운 데이터가 필요하다면 서버 API를 호출하여 필요한 데이터판을 불러와 애플리케이션에 사용할 수 있다.
SPA의 경우 서버에서 사용자에게 제공하는 페이지는 한 종류이지만, 해당 페이지에서 로딩된 자바스크립트와 현재 사용자 브라우저의 주소 상태에 따라 다양한 화면을 보여줄 수 있다.

다른 주소에 다른 화면을 보여주는 것을 라우팅이라고 한다. 리액트 라이브러리 자체에 이 기능이 내장되어 있지는 않다. 그 대신 브라우저의 API를 직접 사용하여 이를 관리하거나 라이브러리를 사용하여 이 작업을 더욱 쉽게 구현할 수 있다.
리액트 라우팅 라이브러리는 리액트라우터, 리치라우터, Next.js등 여러가지가 있다.
리액트 라우터는 클라이언트 사이드에서 이루어지는 라우팅을 아주 간단하게 구현할 수 있도록 해준다. 더 나아가서 나중에 서버 사이드 렌더링을 할 때도 라우팅을 도와주는 컴포넌트들을 제공해 준다.

SPA의 단점은 앱의 규모가 커지면 자바스크립트 파일이 너무 커진다는 것이다. 페이지 로딩 시 사용자가 실제로 방문하지 않을 수도 있는 페이지의 스크립트도 불러오기 때문이다. 하지만 코드 스플리팅을 이용해 라우트별로 파일들을 나누어서 트래픽과 로딩속도를 개선할수 있다.

리액트 라우터처럼 브라우저에서 js를 사용하여 라우팅을 관리하는 것은 자바스크립트를 실행하지 않는 일반 크롤러에서는 페이지의 정보를 제대로 수집해 가지 못한다는 잠재적인 단점이 따른다. 또한 js를 실행할 때까지 페이지가 비어있기 때문에 자바스크립트 파일이 로딩되어 실행되는 짧은 시간동안 흰페이지가 나타날 수 있다는 단점도 있다. 이러한 문제점들은 다행히 서버사이드 렌더링으로 모두 해결할 수 있다.

프로젝트에 리액트 라우터를 적용할 때는 src/index.js 파일에서 react-router-dom에서 내장되어 있는 BrowerRouter라는 컴포넌트를 사용하여 감싸면 된다. 이 컴포넌트는 웹 애플리케이션에 HTML5의 History API를 사용하여 페이지를 새로고침하지 않아도 주소를 변경하고, 현재 주소에 관련된 정보를 props로 쉽게 조회하거나사용할 수 있도록 해준다.

링크 컴포넌트를 클릭하면 다른 주소로 이동시켜주는 컴포넌트이다. 일반 웹 애플리케이션에서는 a태그를 사용해서 페이지를 전환하는데, 리액트 라우터를 사용할 때는 이 태그를 직접 사용하면 안된다. 이 태그는 페이지를 전환하는 과정에서 페이지를 새로 불러오기 때문에 애플리케이션이 들고 있던 상태들을 다 날려버리게 된다. 링크 컴포넌트를 사용해서 페이지를 전환하면, 페이지를 새로 불러오지 않고 애플리케이션은 그대로 유지한 상태에서 HTML5 History API를 사용해 페이지의 주소만 변경해준다. Link컴포넌트 자체는 a태그로 이루어져 있지만 페이지 전환을 방지하는 기능이 내장되어있다.


쿼리는 location 객체에들어있어서 라우트로 사용된 컴포넌트에게 props로 전달되며 웹 애플리케이션에 대한 주소정보를 가지고 있다.

location 의 형태는 다음과 같다.
```
{
    "pathname" : "/about",
    "search" : "?detail=true",
    "hash": ""
}
```
쿼리를 사용할 때는 쿼리 문자열을 객체로 파싱하는 과정에서 결과 값은 언제나 문자열이라는 것에 주의하자.


jsx에서 props를 설정할 때 값을 생략하면 자동으로 true가 설정된다. 

history 객체는 라우트로 사용된 컴포넌트에 match, location 과 함께 전달되는 props중 하나로 이 객체를 통해 컴포넌트 내에 구현하는 메서드에서 라우터 API를 호출할 수 있다. 

withRouter함수는 high order component 이다. 라우트로 사용된 컴포넌트가 아니어도 match, location, history 객체를 접근 할 수 있게 해준다.
withRouter를 사용하면 현재 자신을 보여주고 있는 라우트 컴포넌트를 기준으로 match가 적용된다.

NavLink 는 Link와 비슷하다. 현재 경로와 Link에서 사용하는 경로가 일치하는 경우 특정 스타일 혹은 CSS클래스를 적용할 수 있는 컴포넌트이다.
NavLink에서 링크가 활서오하 되었을 때 스타일을 적용할 때는 activeStyle 값을 CSS클래스를 적용할때는 activeClassName값을 props로 넣어준다.

